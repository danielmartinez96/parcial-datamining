---
author: Alvarez Ignacio Nicolas y ::::::::
title: "Analisis exploratorio de dataSet 'House-Pricing'"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##Carga de Librerias
```{r Librerías}
library("dplyr")
library("corrplot")
library("fastDummies")
library("ggplot2")
library("rpart")
library("rpart.plot")
library("caret")
library("caTools")
library("randomForest")
library("class")
```
### Establecimiento del entorno de trabajo
```{r Librerías}
setwd("~/R-WORKSPACE/Parcial2/parcial-datamining/")
```

###Cargar del DataSet
```{r Librerías}

raw_data <- read.csv("house_data.csv")
```

###Graficos de Dispersión
```{r Librerías}

plot(price~., data=raw_data,col="blue")
```

### Estructura del DataSet
```{r Librerías}
str(raw_data)
```

### Descripcion del DataSet
```{r}
summary(raw_data)
```

### BoxPlot

```{r}
par(mfrow = c(1,3))
boxplot(raw_data$price, main="Price")
boxplot(raw_data$bedrooms, main="Cant Bedrooms")
boxplot(raw_data$bathrooms, main="Cant Bathrooms")
```

```{r}
par(mfrow = c(1,2))
boxplot(raw_data$sqft_living, main="sqft_living (ft^2)")
boxplot(raw_data$sqft_living15, main="sqft_living15 (ft^2)")
```

```{r}
par(mfrow = c(1,2))
boxplot(raw_data$sqft_lot, main="sqft_lot (ft^2)")
boxplot(raw_data$sqft_lot15, main="sqft_lot15 (ft^2)")
```


```{r}
par(mfrow = c(1,2))
boxplot(raw_data$sqft_above, main="sqft_above (ft^2)")
boxplot(raw_data$sqft_basement, main="sqft_basement (ft^2)")
```



```{r Librerías}
df_sqft = select(raw_data, sqft_living, sqft_lot, sqft_above, sqft_living15, sqft_lot15, sqft_basement)

corrplot(cor(df_sqft),method="square")

cor(df_sqft)

```


```{r Librerías}

prueba = raw_data

prueba$sqft_living = raw_data$sqft_above / raw_data$sqft_living
prueba$sqft_basement = raw_data$sqft_above / raw_data$sqft_basement

head(prueba)
summary(prueba)

corrplot(cor(prueba[,c("sqft_living","sqft_lot","sqft_above","sqft_living15","sqft_lot15","sqft_basement")]),method="square")

cor(prueba[,c("sqft_living","sqft_lot","sqft_above","sqft_living15","sqft_lot15","sqft_basement")])

```

```{r Librerías}

prueba= raw_data

prueba = mutate(prueba,sqft_living.nuevo=raw_data$sqft_above/raw_data$sqft_living)

prueba = mutate(prueba,sqft_basement.nuevo=ifelse(raw_data$sqft_basement>0,raw_data$sqft_above/raw_data$sqft_basement,0))

prueba = mutate(prueba,sqft_lot15.nuevo=(raw_data$sqft_lot-raw_data$sqft_lot15)/raw_data$sqft_lot)

prueba = mutate(prueba,sqft_living15.nuevo=(raw_data$sqft_living-raw_data$sqft_living15)/raw_data$sqft_living)

#prueba$sqft_living=raw_data$sqft_above/raw_data$sqft_living
#prueba$sqft_basement=raw_data$sqft_above/raw_data$sqft_basement
head(prueba)
summary(prueba)

corrplot(cor(prueba[,c("sqft_living.nuevo","sqft_lot","sqft_above","sqft_living15.nuevo","sqft_lot15.nuevo","sqft_basement.nuevo")]),method="square")

cor(prueba[,c("sqft_living.nuevo","sqft_lot","sqft_above","sqft_living15.nuevo","sqft_lot15.nuevo","sqft_basement.nuevo")])

```

```{r Librerías}
plot(prueba$price~prueba$sqft_living.nuevo)
```

### CONDITION & GRADE
```{r}
summary(raw_data$condition)
summary(raw_data$grade)
```

```{r}
par(mfrow = c(1,2))
boxplot(raw_data$condition, main="condition")
boxplot(raw_data$grade, main="grade")
```
```{r}
par(mfrow = c(1,2))
pie(table(as.factor(raw_data$condition)), main="condition")
pie(table(as.factor(raw_data$grade)), main="grade")
```

```{r}

df_sqft = select(raw_data, price, grade, condition)
corrplot(cor(df_sqft),method="square")
cor(df_sqft)

```

```{r}
df_sin_condition = select(raw_data, -c(condition))
```

